<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>病恋警告</title>
<style>
/*==== 全局纯黑底色 ====*/
html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}

/*==== 窗口骨架 ====*/
.win{
    position:fixed;
    min-width:260px;
    max-width:360px;
    border:1px solid #ff0000;
    box-shadow:0 0 0 1px #000,0 0 20px rgba(255,0,0,.9);
    font-size:13px;
    user-select:none;
    z-index:1000;
}
/*==== 标题栏 ====*/
.win .cap{
    height:22px;
    line-height:22px;
    background:#000;
    color:#f00;
    padding:0 6px;
    display:flex;
    align-items:center;
    cursor:move;
}
.win .cap::before{              /* 左上角控制台图标 */
    content:'';
    width:14px;height:14px;
    background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACRJREFUeNpi/P//PwMhwAJkVjCQxk8sgv8D0bjUDYhGo0wDAH0RBQF+sfkcAAAAAElFTkSuQmCC') left/contain no-repeat;
    margin-right:6px;
}
.win .cap .tit{flex:1;font-weight:bold;letter-spacing:.5px;}
.win .cap .x{cursor:pointer;padding:0 8px;}

/*==== 客户端区 ====*/
.win .cli{
    background:#000;
    color:#f00;
    padding:18px 24px;
    text-align:center;
    font-family:'Consolas','Courier New',monospace;
    font-weight:bold;
    letter-spacing:1px;
}

/*==== 红底黑字反转模式 ====*/
.win.love .cap{background:#f00;color:#000;}
.win.love .cli{background:#f00;color:#000;}
.win.love{border-color:#000;}

/*==== 抖动 ====*/
@keyframes shake{
    0%,100%{transform:translate(0,0)}
    10%{transform:translate(-1px,-1px)}
    20%{transform:translate(1px,1px)}
    30%{transform:translate(-1px,1px)}
    40%{transform:translate(1px,-1px)}
}
.win.shake{animation:shake .12s 6;}
</style>
</head>
<body>

<script>
/*-------- 语录池 --------*/
const quotes=[
"亲爱的，爱比死冷。","LOOK ME","我会烧尽带你离开我的每座桥梁。",
"要么与我同在，要么化为乌有。","你是我罪有应得的那桩恶习。","别回头看。","你还能去哪？",
"别怕，疼痛只是爱的证明。","你的名字刻在我每一根骨头上。","我们一起腐烂，好不好？",
"你的自由在我死亡之后。","我会把你泡在福尔马林，挂在我的床头，每日都与我早安。",
"只需在我床上哭泣。","你的心跳是我最爱的节拍器。","我要把你的微笑缝在我的唇上。",
"你的呼吸是我存在的唯一证明。","在我的世界里，你永远无法关机。","你的恐惧让我更加兴奋。",
"我们一起坠入永不醒来的噩梦吧。","你的皮肤是我最爱的画布。","我要收藏你每一滴眼泪。",
"你是我的，连影子都不许逃走。","让我们一起在黑暗中慢慢窒息。","你的痛苦是我最美的交响乐。"
];

/*-------- 全局参数 --------*/
let zIdx=1000, interval=600, loveMode=false;

/*-------- 创建窗口 --------*/
function createWin(){
    const w=document.createElement('div');
    w.className='win';
    if(loveMode) w.classList.add('love');
    if(Math.random()<.15) w.classList.add('shake');      // 15% 概率抖动

    const pos=randPos();
    w.style.left=pos.x+'px';
    w.style.top=pos.y+'px';
    w.style.zIndex=zIdx++;

    w.innerHTML=
    `<div class="cap">
        <span class="tit">${loveMode?'你的挚爱':'系统消息'}</span>
        <span class="x" onclick="this.parentElement.parentElement.remove()">×</span>
     </div>
     <div class="cli">${randQuote()}</div>`;

    document.body.appendChild(w);

    /* 偶尔连爆 1~3 个 */
    if(Math.random()>.8){
        const burst=Math.floor(Math.random()*3)+1;
        for(let i=1;i<=burst;i++) setTimeout(createWin,i*80);
    }
}

/*-------- 工具函数 --------*/
function randQuote(){ return quotes[Math.floor(Math.random()*quotes.length)]; }
function randPos(){
    const m=40;
    return {
        x:Math.floor(Math.random()*(window.innerWidth-300)+m),
        y:Math.floor(Math.random()*(window.innerHeight-120)+m)
    };
}

/*-------- 速度递增 --------*/
function speedUp(){
    if(interval>40) interval-=50;
    setTimeout(speedUp,2000);
}

/*-------- 颜色反转计时 --------*/
setTimeout(()=>{ loveMode=true; },20000);   // 20 秒后进入“你的挚爱”红底黑字

/*-------- 启动 --------*/
window.onload=()=>{
    setTimeout(createWin,500);
    setInterval(createWin,interval);
    speedUp();
};

/*-------- 离开拦截 --------*/
window.onbeforeunload=()=>"你确定要离开我吗？";
</script>
</body>
</html>
